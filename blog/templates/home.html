<!DOCTYPE html>
<html>
    <head>
        <title>Mawson's Blog</title>
        <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}" />
    </head>
    <body onload="AddSnow();">
        <nav class="navbar navbar-default navbar-static-top navbar-inverse">
          <div class="container">
            <ul class="nav navbar-nav">
              <li class="active">
                <a href="/"><span class="glyphicon glyphicon-home"></span> Home</a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="glyphicon glyphicon-folder-open"></span> Menu<span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="{{ url_for('posts', name='hello_world') }}">Clock</a></li>
                    <li><a href="{{ url_for('posts', name='Games') }}">Fun and Games</a></li>
                    <li><a href="{{ url_for('posts', name='EPQ') }}">EPQ</a></li>
                  </ul>
              </li>
            </ul>
          </div>
        </nav>
        <div class="jumbotron text-center">
            <div class="container">
              <div class = "title">
                <h1><mark>Mawson's Blog</mark></h1>
              </div>
              <p>This is the blog of Matthew Mawson. Where blog updates go to die.</p>
            </div>
        </div>
        <div class="container">
        <canvas id="canvas"></canvas>
            <div class="row">
                <h3>Amazing Mazes</h3>
                <p>On a rainy day in the summer holidays, I thought I would work on my maze program, a project I had been working on that would draw a maze from a file and then would calculate the best route. However, this route finding algorithm seemed a little boring so I set about creating a pseudo 3D maze engine that you could walk around in. 
                  For this foray into “3D” graphics I wanted to do it without the aid of Google, testing out my knowledge of the C# graphics class. While developing the solution, I was so pleased about how routines I had made previously for searching through the maze were very useful in the 3D part.
                <br>
                When drawing the maze, I took the direction the player was facing and then changed that into one of the cardinal directions that could be used to look at the array holding the maze data. By checking if a specific square had a wall or not, I could display the view to the user, also I used the same routine to check the collision detection of the player. This means the player can just use a keyboard with up to go forward, left and right to turn and the down arrow to backtrack.
                <br>
                While this sort of project would be more at home on the IBM PC, I felt a great sense of accomplishment that the whole project went together so well providing me a good base to work on future additions…
                </p>
                <img src="https://cloud.githubusercontent.com/assets/15985102/18828521/297e5e0e-83d0-11e6-8567-569ecde95291.png">
                <hr>
                <h3>Terrain</h3>
                <p>
                To generate some smooth looking terrain I have created a simple algorithm to randomly generate a set of points. The higher point is on the screen, the higher the chance of the next point being lower, ensuring there are hills but they don't continue all the way up to the top.
                </p>
                <img src="https://cloud.githubusercontent.com/assets/15985102/16837386/fc1b04fc-49ba-11e6-891e-5f74b7d9bb3d.jpg">
                <hr>
                <h3>Looking Good</h3>
                <p>
                I recently got back into Minecraft, playing on a server. Here are the results after a month.
                </p>
                <img src="https://cloud.githubusercontent.com/assets/15985102/13581263/f9cc512e-e49d-11e5-9850-3d08ffd60b6c.png" width="683" height="384">
                <hr>
                <h3>Change Log</h3>
                <p>
                <br>
                Updates and fixes to the wedsite include;
                <br>
                <ul>
                    <li class ="list">The blog is now on one main page to make updating easier</li>
                    <li class ="list">A clock has been added, see in the menu</li>
                    <li class ="list">New logos on the menu</li>
                    <li class ="list">Bugs fixed</li>
                    <li class ="list">Removed Herobrine</li>
                </ul>
               </p>
          </div>
        </div>
        <script>
function AddSnow() {

    if ($('#cnvSnow').length == 0) {
        $('<canvas id="cnvSnow" style="position:fixed;top:0;left:0;"></canvas>').hide().appendTo("body").fadeIn(4000);
    } else {
        return;
    }

    var _windowResizeTimer;
    $(window).resize(function () {
        window.clearTimeout(_windowResizeTimer);
        _windowResizeTimer = window.setTimeout(AddSnow, 1000)
    });

    //canvas init
    var canvas = document.getElementById("cnvSnow");
    var ctx = canvas.getContext("2d");

    //canvas dimensions
    var W = window.innerWidth;
    var H = window.innerHeight;
    canvas.width = W;
    canvas.height = H;

    //snowflake particles
    var mp = Math.round(Math.random() * 100 + 25); // 33; //max particles
    var particles = [];
    for (var i = 0; i < mp; i++) {
        particles.push({
            x: Math.random() * W, //x-coordinate
            y: Math.random() * H, //y-coordinate
            r: Math.random() * 4 + 1, //radius
            d: Math.random() * mp //density
        })
    }

    //Lets draw the flakes
    function draw() {
        ctx.clearRect(0, 0, W, H);

        ctx.fillStyle = "rgba(222, 243, 255, 0.65)";
        ctx.beginPath();
        for (var i = 0; i < mp; i++) {
            var p = particles[i];
            ctx.moveTo(p.x, p.y);
            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
        }
        ctx.fill();
        update();
    }

    //Function to move the snowflakes
    //angle will be an ongoing incremental flag. Sin and Cos functions will be applied to it to create vertical and horizontal movements of the flakes
    var angle = 0;
    function update() {
        angle += 0.005;
        for (var i = 0; i < mp; i++) {
            var p = particles[i];
            //Updating X and Y coordinates
            //We will add 1 to the cos function to prevent negative values which will lead flakes to move upwards
            //Every particle has its own density which can be used to make the downward movement different for each flake
            //Lets make it more random by adding in the radius
            p.y += Math.cos(angle + p.d) + 1 + p.r / 2;
            p.x += Math.sin(angle) * 2;

            //Sending flakes back from the top when it exits
            //Lets make it a bit more organic and let flakes enter from the left and right also.
            if (p.x > W + 5 || p.x < -5 || p.y > H) {
                if (i % 3 > 0) //66.67% of the flakes
                {
                    particles[i] = { x: Math.random() * W, y: -10, r: p.r, d: p.d };
                }
                else {
                    //If the flake is exitting from the right
                    if (Math.sin(angle) > 0) {
                        //Enter from the left
                        particles[i] = { x: -5, y: Math.random() * H, r: p.r, d: p.d };
                    }
                    else {
                        //Enter from the right
                        particles[i] = { x: W + 5, y: Math.random() * H, r: p.r, d: p.d };
                    }
                }
            }
        }
    }

    //animation loop
    setInterval(draw, 33);
}    
    </script>
    </body>
</html>
